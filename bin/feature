#!/bin/bash

# root path project
__root="$(cd "$(dirname "$(dirname "${BASH_SOURCE[0]}")")" && pwd)"

# defaults
level="LEVEL=''"
division="municipios"
file="${__root}/config/geojson.sql"

# parse arguments
while true
do
  case $1 in
    -l|--level)
      level="LEVEL='"$2"'"
      if [ "$2" == "ccaa" ]; then
        division="ccaa"
      elif [ "$2" == "prov" ]; then
        division="prov"
      fi
      shift 2
      ;;
    *)
      break
  esac
done

output="${__root}/features/${division}.geojson"

# execute the runner with a preset of parameters
"$(dirname "$0")"/runner feature "--variable=${level}|--tuples-only|--file=${file}" "${output}" "$@"

exit $?;
